{"ast":null,"code":"var _s = $RefreshSig$();\nimport { db } from \"../firebase/config\";\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile, signOut } from 'firebase/auth';\nimport { useState, useEffect } from 'react';\nexport const useAuthentication = () => {\n  _s();\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(null);\n  const [canceled, setCanceled] = useState(false);\n  const auth = getAuth();\n  function checkIfCanceled() {\n    if (canceled) {\n      return;\n    }\n  }\n  const createUser = async data => {\n    checkIfCanceled();\n    setLoading(true);\n    try {\n      const {\n        user\n      } = await createUserWithEmailAndPassword(auth, data.email, data.password);\n      await updateProfile(user, {\n        displayName: data.displayName\n      });\n      return user;\n    } catch (error) {\n      console.log(error.message);\n      console.log(typeof error.message);\n      let systemErrorMessage;\n      if (error.message.includes(\"Password\")) {\n        systemErrorMessage = \"A senha deve ter pelo menos 6 caracteres\";\n      } else if (error.message.includes(\"email-already\")) {\n        systemErrorMessage = \"E-mail já cadastrado.\";\n      } else {\n        systemErrorMessage = \"Ocorreu erro, tente mais tarde\";\n      }\n      setError(systemErrorMessage);\n    }\n    setLoading(false);\n  };\n  useEffect(() => {\n    return () => setCanceled(true);\n  }, []);\n  return {\n    auth,\n    createUser,\n    error,\n    loading\n  };\n};\n_s(useAuthentication, \"MBVx+m0OPLVNwPH2sjtZMhczxUo=\");","map":{"version":3,"names":["db","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","updateProfile","signOut","useState","useEffect","useAuthentication","_s","error","setError","loading","setLoading","canceled","setCanceled","auth","checkIfCanceled","createUser","data","user","email","password","displayName","console","log","message","systemErrorMessage","includes"],"sources":["/Users/wagnerparisoto/Documents/fontes/estudos/ReactZeroAMaestria/10_MINIBLOG/miniblog/src/hooks/useAuthentication.js"],"sourcesContent":["import {db} from \"../firebase/config\"\n\nimport{\n    getAuth,\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n    updateProfile,\n    signOut\n\n} from 'firebase/auth'\n\nimport { useState, useEffect } from 'react'\n\nexport const useAuthentication = () => {\n    const [error, setError] = useState(null)\n    const [loading, setLoading] = useState(null)\n\n    const [canceled, setCanceled] = useState(false)\n\n    const auth = getAuth()\n\n\n    function checkIfCanceled(){\n        if(canceled){\n            return;\n        }\n    }\n\n    const createUser = async (data) =>{\n        checkIfCanceled()\n\n        setLoading(true)\n\n        try{\n            const {user} = await createUserWithEmailAndPassword(\n                auth,\n                data.email,\n                data.password\n            )\n\n            await updateProfile(user, {\n                displayName: data.displayName\n            })\n\n            return user\n        } catch(error){\n            console.log(error.message)\n            console.log(typeof error.message)\n\n            let systemErrorMessage\n\n            if(error.message.includes(\"Password\")){\n                systemErrorMessage = \"A senha deve ter pelo menos 6 caracteres\"\n            }else if(error.message.includes(\"email-already\")){\n                systemErrorMessage = \"E-mail já cadastrado.\"\n            }else{\n                systemErrorMessage = \"Ocorreu erro, tente mais tarde\"\n            }\n\n            setError(systemErrorMessage)\n        }\n\n        setLoading(false)\n    }\n\n    useEffect(() => {\n        return () => setCanceled(true)\n    }, [])\n\n    return {\n        auth,\n        createUser,\n        error,\n        loading\n    }\n}"],"mappings":";AAAA,SAAQA,EAAE,QAAO,oBAAoB;AAErC,SACIC,OAAO,EACPC,8BAA8B,EAC9BC,0BAA0B,EAC1BC,aAAa,EACbC,OAAO,QAEJ,eAAe;AAEtB,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,OAAO,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGL,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EAE5C,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAE/C,MAAMU,IAAI,GAAGf,OAAO,CAAC,CAAC;EAGtB,SAASgB,eAAeA,CAAA,EAAE;IACtB,IAAGH,QAAQ,EAAC;MACR;IACJ;EACJ;EAEA,MAAMI,UAAU,GAAG,MAAOC,IAAI,IAAI;IAC9BF,eAAe,CAAC,CAAC;IAEjBJ,UAAU,CAAC,IAAI,CAAC;IAEhB,IAAG;MACC,MAAM;QAACO;MAAI,CAAC,GAAG,MAAMlB,8BAA8B,CAC/Cc,IAAI,EACJG,IAAI,CAACE,KAAK,EACVF,IAAI,CAACG,QACT,CAAC;MAED,MAAMlB,aAAa,CAACgB,IAAI,EAAE;QACtBG,WAAW,EAAEJ,IAAI,CAACI;MACtB,CAAC,CAAC;MAEF,OAAOH,IAAI;IACf,CAAC,CAAC,OAAMV,KAAK,EAAC;MACVc,OAAO,CAACC,GAAG,CAACf,KAAK,CAACgB,OAAO,CAAC;MAC1BF,OAAO,CAACC,GAAG,CAAC,OAAOf,KAAK,CAACgB,OAAO,CAAC;MAEjC,IAAIC,kBAAkB;MAEtB,IAAGjB,KAAK,CAACgB,OAAO,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAC;QAClCD,kBAAkB,GAAG,0CAA0C;MACnE,CAAC,MAAK,IAAGjB,KAAK,CAACgB,OAAO,CAACE,QAAQ,CAAC,eAAe,CAAC,EAAC;QAC7CD,kBAAkB,GAAG,uBAAuB;MAChD,CAAC,MAAI;QACDA,kBAAkB,GAAG,gCAAgC;MACzD;MAEAhB,QAAQ,CAACgB,kBAAkB,CAAC;IAChC;IAEAd,UAAU,CAAC,KAAK,CAAC;EACrB,CAAC;EAEDN,SAAS,CAAC,MAAM;IACZ,OAAO,MAAMQ,WAAW,CAAC,IAAI,CAAC;EAClC,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACHC,IAAI;IACJE,UAAU;IACVR,KAAK;IACLE;EACJ,CAAC;AACL,CAAC;AAAAH,EAAA,CA9DYD,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}